(this["webpackJsonpnconnect-web"]=this["webpackJsonpnconnect-web"]||[]).push([[0],{103:function(e,a,t){},147:function(e,a,t){},161:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(8),c=t.n(s),d=(t(102),t(103),t(55)),i=t(19),o=t(72),l={en:{translation:t(73)},"zh-CN":{translation:t(74)}};d.a.use(o.a).use(i.e).init({resources:l,fallbackLng:"en",interpolation:{escapeValue:!1}});var u=d.a,h=t(10),p=t.n(h),m=t(14),v=t(77),g=t(78),f=t(20),A=t(86),b=t(87),w=t(79),k=t.n(w),y=t(199),E=t(208),C=t(193),S=t(204),O=t(207),j=t(200),x=t(203),P=t(205),N=t(201),I=t(202),T=t(80),L=t.n(T);var R="/rpc/admin",Q={getAdminToken:{method:"getAdminToken"},getAddrs:{method:"getAddrs"},setAddrs:{method:"setAddrs"},addAddrs:{method:"addAddrs"},removeAddrs:{method:"removeAddrs"},getLocalIP:{method:"getLocalIP"},getInfo:{method:"getInfo"}},M={},J=function(e){Q.hasOwnProperty(e)&&(M[e]=function(a,t){return t=function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];for(var r=0,s=t;r<s.length;r++){var c=s[r];if(c)for(var d=0,i=Object.keys(c);d<i.length;d++){var o=i[d];void 0!==c[o]&&(e[o]=c[o])}}return e}({},Q[e].defaultParams,t),function(e,a){return K.apply(this,arguments)}(a,Q[e].method,t)})};for(var D in Q)J(D);function K(){return(K=Object(m.a)(p.a.mark((function e(a,t){var n,r,s,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,L()({url:a,method:"POST",timeout:1e4,data:{id:"nConnect-web",jsonrpc:"2.0",method:t,params:n}});case 3:if(r=e.sent,!(s=r.data).error){e.next=7;break}throw s.error;case 7:if(void 0===s.result){e.next=9;break}return e.abrupt("return",s.result);case 9:throw new Error("rpc response contains no result or error field");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return z.apply(this,arguments)}function z(){return(z=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.getAdminToken(R));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.getAddrs(R));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,a){return H.apply(this,arguments)}function H(){return(H=Object(m.a)(p.a.mark((function e(a,t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a&&(n.acceptAddrs=a),t&&(n.adminAddrs=t),e.abrupt("return",M.setAddrs(R,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.getInfo(R));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t(147);var V=function(e){Object(b.a)(t,e);var a=Object(A.a)(t);function t(e){var n;Object(v.a)(this,t),(n=a.call(this,e)).state={adminTokenStr:"",adminTokenQRCode:"",acceptAddrs:"",adminAddrs:"",addr:"",localIP:[],language:"",showAdvanced:!1};for(var r=0;r<u.languages.length;r++)if(l[u.languages[r]]){n.state.language=u.languages[r];break}return n.handleAcceptAddrsChange=n.handleAcceptAddrsChange.bind(Object(f.a)(n)),n.handleAdminAddrsChange=n.handleAdminAddrsChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.updateAdminToken=n.updateAdminToken.bind(Object(f.a)(n)),n.handleAdvancedChange=n.handleAdvancedChange.bind(Object(f.a)(n)),n.handleLanguageChange=n.handleLanguageChange.bind(Object(f.a)(n)),n}return Object(g.a)(t,[{key:"handleAcceptAddrsChange",value:function(e){this.setState({acceptAddrs:e.target.value})}},{key:"handleAdminAddrsChange",value:function(e){this.setState({adminAddrs:e.target.value})}},{key:"handleAdvancedChange",value:function(e){this.setState({showAdvanced:!this.state.showAdvanced})}},{key:"handleLanguageChange",value:function(e){this.setState({language:e.target.value}),u.changeLanguage(e.target.value)}},{key:"handleSubmit",value:function(){var e=Object(m.a)(p.a.mark((function e(a){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,F(G(this.state.acceptAddrs),G(this.state.adminAddrs));case 4:t=e.sent,this.setState({acceptAddrs:q(t.acceptAddrs),adminAddrs:q(t.adminAddrs)}),alert("Save success!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),alert(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(a){return e.apply(this,arguments)}}()},{key:"updateAdminToken",value:function(){var e=Object(m.a)(p.a.mark((function e(){var a,t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_();case 3:if(!(a=e.sent)){e.next=10;break}return t=JSON.stringify(a),e.next=8,k.a.toDataURL(t);case 8:n=e.sent,this.setState({adminTokenStr:t,adminTokenQRCode:n});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.updateAdminToken(),setInterval(this.updateAdminToken,3e5),function(){return B.apply(this,arguments)}().then((function(a){e.setState({acceptAddrs:q(a.acceptAddrs),adminAddrs:q(a.adminAddrs)})})).catch((function(e){console.error(e),alert(e)})),function(){return U.apply(this,arguments)}().then((function(a){e.setState({addr:a.addr,localIP:a.localIP.ipv4})})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(C.a,null,r.a.createElement("div",{className:"language-switcher"},r.a.createElement(S.a,{value:this.state.language,onChange:this.handleLanguageChange},Object.keys(l).map((function(e){return r.a.createElement(O.a,{key:e,value:e},u.getFixedT(e)("language"))})))),r.a.createElement("div",{className:"row"},r.a.createElement("img",{src:"/static/media/nkn_logo.png",alt:"NKN logo"})),r.a.createElement("div",{className:"row"},r.a.createElement("img",{src:this.state.adminTokenQRCode,alt:"QR Code"})),r.a.createElement("div",{className:"row"},this.props.t("QR code description")),r.a.createElement("div",{className:"row"},r.a.createElement(y.a,{i18nKey:"purchase description",components:{a:r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://nconnect-payment.nkncdn.com/payment/?addr=".concat(W(this.state.addr),"&lng=").concat(this.state.language)})}})),r.a.createElement("div",{className:"row"},r.a.createElement(j.a,{variant:"outlined",color:"primary",onClick:this.handleAdvancedChange,style:{width:"100%"}},this.state.showAdvanced?r.a.createElement(N.a,null):r.a.createElement(I.a,null),this.state.showAdvanced?this.props.t("hide advanced"):this.props.t("show advanced"))),r.a.createElement(x.a,{in:this.state.showAdvanced},r.a.createElement("div",{className:"advanced-row"},r.a.createElement(P.a,{disabled:!0,multiline:!0,label:this.props.t("local IP address"),value:this.state.localIP.join("\n"),style:{width:"100%"}})),r.a.createElement("div",{className:"advanced-row"},r.a.createElement(P.a,{disabled:!0,multiline:!0,label:this.props.t("access key"),value:this.state.adminTokenStr,style:{width:"100%"}})),r.a.createElement("div",{className:"advanced-row"},r.a.createElement(P.a,{multiline:!0,variant:"filled",label:this.props.t("accept addresses"),value:this.state.acceptAddrs,onChange:this.handleAcceptAddrsChange,style:{width:"100%"}}),r.a.createElement(P.a,{multiline:!0,variant:"filled",label:this.props.t("admins"),value:this.state.adminAddrs,onChange:this.handleAdminAddrsChange,style:{width:"100%"}})),r.a.createElement("div",{className:"advanced-row"},r.a.createElement(j.a,{variant:"contained",color:"primary",onClick:this.handleSubmit,style:{width:"100%"}},this.props.t("save"))))))}}]),t}(r.a.Component);function q(e){return e?e.join("\n"):""}function G(e){return e?e.split("\n").filter((function(e){return e.length>0})):[]}function W(e){var a=e.split(".");return a[a.length-1]}var X=Object(E.a)()(V);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))},73:function(e){e.exports=JSON.parse('{"language":"English","QR code description":"Scan the QR code on nMobile Pro to connect and manage device.","purchase description":"Purchase data plan on nMobile Pro or <a>web payment portal</a>","show advanced":"Show Advanced Settings","hide advanced":"Hide Advanced Settings","local IP address":"Local IP address","access key":"Access key (expires in 5 minutes)","accept addresses":"Accept addresses","admins":"Admins","save":"Save"}')},74:function(e){e.exports=JSON.parse('{"language":"\u7b80\u4f53\u4e2d\u6587","QR code description":"\u5728 nMobile Pro \u4e2d\u626b\u63cf\u4e8c\u7ef4\u7801\u6765\u8fde\u63a5\u548c\u7ba1\u7406\u8bbe\u5907\u3002","purchase description":"\u5728 nMobile Pro \u5185\u6216<a>\u5728\u7ebf\u652f\u4ed8\u9875\u9762</a>\u8d2d\u4e70\u6d41\u91cf\u3002","show advanced":"\u663e\u793a\u9ad8\u7ea7\u8bbe\u7f6e","hide advanced":"\u9690\u85cf\u9ad8\u7ea7\u8bbe\u7f6e","local IP address":"\u672c\u5730 IP \u5730\u5740","access key":"\u8bbf\u95ee\u5bc6\u94a5\uff085 \u5206\u949f\u540e\u8fc7\u671f\uff09","accept addresses":"\u767d\u540d\u5355\u5730\u5740","admins":"\u7ba1\u7406\u5458\u5730\u5740","save":"\u4fdd\u5b58"}')},97:function(e,a,t){e.exports=t(161)}},[[97,1,2]]]);
//# sourceMappingURL=main.2de55432.chunk.js.map