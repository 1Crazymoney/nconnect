(this["webpackJsonpnkn-socks-web"]=this["webpackJsonpnkn-socks-web"]||[]).push([[0],{114:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),s=n.n(c),d=(n(69),n(70),n(10)),i=n.n(d),o=n(15),u=n(52),l=n(53),h=n(25),p=n(57),m=n(58),f=n(54),v=n.n(f),A=n(153),b=n(148),k=n(152),g=n(55),y=n.n(g);var w="/rpc/admin",j={getAdminToken:{method:"getAdminToken"},getAddrs:{method:"getAddrs"},setAddrs:{method:"setAddrs"},addAddrs:{method:"addAddrs"},removeAddrs:{method:"removeAddrs"},getLocalIP:{method:"getLocalIP"}},O={},C=function(e){j.hasOwnProperty(e)&&(O[e]=function(t,n){return n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,c=n;a<c.length;a++){var s=c[a];if(s)for(var d=0,i=Object.keys(s);d<i.length;d++){var o=i[d];void 0!==s[o]&&(e[o]=s[o])}}return e}({},j[e].defaultParams,n),function(e,t){return S.apply(this,arguments)}(t,j[e].method,n)})};for(var E in j)C(E);function S(){return(S=Object(o.a)(i.a.mark((function e(t,n){var r,a,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,y()({url:t,method:"POST",timeout:1e4,data:{id:"nkn-socks-web",jsonrpc:"2.0",method:n,params:r}});case 3:if(a=e.sent,!(c=a.data).error){e.next=7;break}throw c.error;case 7:if(void 0===c.result){e.next=9;break}return e.abrupt("return",c.result);case 9:throw"rpc response contains no result or error field";case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.getAdminToken(w));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.getAddrs(w));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},t&&(r.acceptAddrs=t),n&&(r.adminAddrs=n),e.abrupt("return",O.setAddrs(w,r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.getLocalIP(w));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(114);function R(e){return e?e.join("\n"):""}function D(e){return e?e.split("\n").filter((function(e){return e.length>0})):[]}var J=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={adminTokenQRCode:null,acceptAddrs:"",adminAddrs:"",localIP:[]},r.handleAcceptAddrsChange=r.handleAcceptAddrsChange.bind(Object(h.a)(r)),r.handleAdminAddrsChange=r.handleAdminAddrsChange.bind(Object(h.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(h.a)(r)),r}return Object(l.a)(n,[{key:"handleAcceptAddrsChange",value:function(e){this.setState({acceptAddrs:e.target.value})}},{key:"handleAdminAddrsChange",value:function(e){this.setState({adminAddrs:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,I(D(this.state.acceptAddrs),D(this.state.adminAddrs));case 4:n=e.sent,this.setState({acceptAddrs:R(n.acceptAddrs),adminAddrs:R(n.adminAddrs)}),alert("Save success!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),alert(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;(function(){return x.apply(this,arguments)})().then((function(e){if(e)return v.a.toDataURL(JSON.stringify(e))})).then((function(t){t&&e.setState({adminTokenQRCode:t})})).catch((function(e){console.error(e),alert(e)})),function(){return P.apply(this,arguments)}().then((function(t){e.setState({acceptAddrs:R(t.acceptAddrs),adminAddrs:R(t.adminAddrs)})})).catch((function(e){console.error(e),alert(e)})),function(){return L.apply(this,arguments)}().then((function(t){e.setState({localIP:t.ipv4})})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(b.a,null,a.a.createElement("div",null,a.a.createElement("img",{src:this.state.adminTokenQRCode})),a.a.createElement("div",null,a.a.createElement(k.a,{disabled:!0,multiline:!0,label:"Local IP address",value:this.state.localIP.join("\n")})),a.a.createElement("div",null,a.a.createElement(k.a,{multiline:!0,variant:"filled",label:"Accept addresses",value:this.state.acceptAddrs,onChange:this.handleAcceptAddrsChange,style:{width:"100%"}})),a.a.createElement("div",null,a.a.createElement(k.a,{multiline:!0,variant:"filled",label:"Admin addresses",value:this.state.adminAddrs,onChange:this.handleAdminAddrsChange,style:{width:"100%"}})),a.a.createElement("div",null,a.a.createElement(A.a,{variant:"contained",color:"primary",onClick:this.handleSubmit},"Save"))))}}]),n}(a.a.Component);s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(J,null)),document.getElementById("root"))},64:function(e,t,n){e.exports=n(118)},70:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.579aafac.chunk.js.map